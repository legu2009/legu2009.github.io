<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>'DQ培你"消"遥游，重重好礼等你拿</title>
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="cleartype" content="on">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <script type="text/javascript" src="js/rem_w.js" ></script>
    <script type="text/javascript" src="js/jquery.min2.0.3.js" ></script>
    <link rel="stylesheet" type="text/css" href="css/dq.css">
    <script type="text/javascript" src="js/jsticketapi-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/imagesloaded.pkgd.min.js"></script>
    <style>
        body,html,.container{height: 100%;}
    </style>
</head>
<div class="loading">
    <div class="ship_water">
        <div class="cloud">
            <img src="img/loading_cloud_1.png"  class="cloud1" />
            <img src="img/loading_cloud_2.png"  class="cloud2" />
            <img src="img/loading_cloud_3.png"  class="cloud3" />
        </div>
        <img src="img/index_ship.png"  class="ship" />
        <div class="water">
            <div class="load clearfix">
                <span class="loading_font"><img src="img/loading_font.png" width="100%"/></span>
                <span class="dian dian1"><img src="img/dian.png" width="100%" /></span>
                <span class="dian dian2"><img src="img/dian.png" width="100%" /></span>
                <span class="dian dian3"><img src="img/dian.png" width="100%" /></span>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/game.js"></script>
<link rel="stylesheet" type="text/css" href="css/dq.css?rev=@@hash">
<link rel="stylesheet" href="css/game.css"/>
<link rel="stylesheet" type="text/css" href="css/magic.min.css">
<div class="explain">
    <img src="img/logo.png"  class="logo"/>
    <img src="img/balloon.png"  class="air_ball"/>
    <img src="img/game_explain_bg.png"  class="bg"/>
    <img src="img/game_explain_title.png"  class="tit"/>
    <div class="main">
        <div class="game">
            <img src="img/game_explain.png" width="100%"/>
            <img src="img/game_explain_1.png"  class="explain_1"/>
            <img src="img/game_explain_2.png"  class="explain_2"/>
            <img src="img/hand1.png"  class="hand_1"/>
            <img src="img/hand1.png"  class="hand_2"/>
        </div>
        <p>三个相同的图案连成一排就会消除</p>
        <a href="javascript:;" class="ok">
            <img src="img/ok.png" width="100%"/>
        </a>
    </div>
</div>
<div class="container game_page">
    <img src="img/logo.png"  class="logo"/>
    <img src="img/game_cloud.png"  class="cloud"/>
    <div class="cup">
        <img src="img/beizi_1.png"  class="cup1"/>
        <img src="img/beizi_2.png"  class="cup2"/>
    </div>
    <div class="content">
        <div class="game_container">
            <div id="gameContainer" style="margin:auto auto;" class="game_main"></div>
            <div class="time">
                <img src="img/time_0.png"   style="display:none"    class="time_0"/>
                <img src="img/time_1.png"   style="display:none"    class="time_1"/>
                <img src="img/time_2.png"   style="display:none"    class="time_2"/>
                <img src="img/time_3.png"   style="display:none"    class="time_3"/>
                <img src="img/time_4.png"   style="display:none"    class="time_4"/>
                <img src="img/time_5.png"   style="display:none"    class="time_5"/>
                <img src="img/time_6.png"   style="display:none"    class="time_6"/>
                <img src="img/time_7.png"   style="display:none"    class="time_7"/>
                <img src="img/time_8.png"   style="display:none"    class="time_8"/>
                <img src="img/time_9.png"   style="display:none"    class="time_9"/>
                <img src="img/time_10.png"  style="display:none"    class="time_10"/>
                <img src="img/time_11.png"  style="display:none"    class="time_11"/>
                <img src="img/time_12.png"  style="display:none"    class="time_12"/>
                <img src="img/time_13.png"  style="display:none"    class="time_13"/>
                <img src="img/time_14.png"  style="display:none"    class="time_14"/>
                <img src="img/time_15.png"  class="time_15"/>
            </div>
        </div>
        <img src="img/index_ship.png"  class="ship"/>
        <img src="img/game_bg.png"  width="100%" class="bg"/>
    </div>
    <div style="display: none">
        <img src="img/1.png" />
        <img src="img/2.png" />
        <img src="img/3.png" />
        <img src="img/4.png" />
        <img src="img/5.png" />
        <img src="img/6.png" />
        <img src="img/7.png" />
        <img src="img/8.png" />
    </div>
</div>
<script>
    $(function () {
        var gemWidth = Math.floor(($(document).width() / 6));
        $('.game_main').css('background-size', gemWidth + 'px' + ' ' + gemWidth + 'px');
        var game = new ttaxc({
            gemWidth: gemWidth,
            container: '#gameContainer',
//            timeContainer: '#timer',
            minEliminate: 3,
            scoreBase: 50,
            rows: 6,
            columns: 6,
            stage: [
                {
                    time: 15,
                    gem: [
                        'img/1.png',
                        'img/2.png',
                        'img/3.png',
                        'img/4.png',
                        'img/5.png',
                        'img/6.png',
                        'img/7.png',
                        'img/8.png',
                    ],
                    score: 10000,
                },
            ],
            onEliminateStop: function () {
                $('#addScore').fadeOut();
                $('#combos').fadeOut();
            },
            onGameOver: function (stage, needScore, currentScore) {
                alert('时间到！进入抽奖！');
				//location.href =  '/dq/xxl/game_over';
                //$('#gameOver div[name=stage]').html('第 ' + stage + ' 关');
                //$('#gameOver div[name=stageScore]').html('目标得分: ' + needScore + ' 分');
                //$('#gameOver div[name=score]').html('最终得分: ' + currentScore + ' 分');
            },
            onGameClear: function (score) {
                $('#gameClear').show();
                $('#gameClear div[name=score]').html(score + ' 分');
            },
            onTimer: function (second_current, second_stage){
                var n = parseInt(second_current) + 1;
                $('.time_'+n).hide();
                $('.time_'+second_current).show();
                //console.log(second_current + ' - ' + second_stage);
            },
        });

        $(".ok").on('click', function () {
            game.play();
            $(".explain").hide();
        })

        setInterval(function () {
            if ($('.cup1').css('display') != 'none') {
                $('.cup1').hide();
                $('.cup2').show();
            } else {
                $('.cup1').show();
                $('.cup2').hide();
            }
        }, 300);
    });
</script>
<div style="display: none">
    <img src="img/seawater.png"/>
    <img src="img/rule_main_bg.png"/>
    <img src="img/costa_rule_bg.jpg"/>
    <img src="img/loading_bg.png"/>
    <img src="img/loading_bg.png"/>
    <img src="img/seawater.png"/>
    <img src="img/game_bg.jpg"/>
    <img src="img/lottery-bg.png"/>
    <img src="img/lottery-turntable.png"/>
</div>
<script>
    $(function () {

        var loaded = 0;
        if ($('body img').length === 0 || navigator.userAgent.indexOf('MSIE 9') != -1) {
            $('.loading').fadeOut();
            $('.container').fadeIn();
        } else {
            $('body img').imagesLoaded().progress(function (instance, image) {
                loaded++;
                var loaded_num = parseInt(loaded / instance.images.length * 100);
                if (loaded == instance.images.length) {
                    $('.loading').fadeOut();
                    $('.container').fadeIn();
                }
            });
        }
    });
</script>
</body>
</html>